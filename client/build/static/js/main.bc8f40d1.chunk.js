(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t,a){e.exports={purple:"styles_purple__3xh8b",black:"styles_black__3Tk7k",smallPurple:"styles_smallPurple__Wpznm"}},128:function(e,t,a){e.exports={container:"styles_container__3710A",logo:"styles_logo__3EFlQ",guest:"styles_guest__5Ltnc"}},369:function(e,t,a){},370:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),s=a(13),c=a.n(s),i=a(89),o=a(12),l=a(16),u=a.n(l),p=a(27),d=a(7),j=a(24),b=a.n(j),m=a(188),O=a.n(m),h=a(412),_=a(408),g=a(80),x=a.n(g),f=function(e){var t=Object(o.c)((function(e){return e.auth})).username;return Object(n.jsx)("div",{className:x.a.container,onClick:e.onClick,children:Object(n.jsxs)("div",{className:x.a.wrapper,children:[Object(n.jsxs)("h1",{className:x.a.title,children:["Hello, ",t,"!"]}),Object(n.jsx)("p",{className:x.a.description,children:"I really appreciate that you take time to have a look to my work. This app is an instant messaging project that offer the possibility to create and join channels and start a conversation."}),Object(n.jsxs)("ul",{className:x.a.list,children:[Object(n.jsx)("li",{children:'\u2b50\ufe0f Use the "menu" icon on top (Mobile).'}),Object(n.jsx)("li",{children:"\u2b50\ufe0f Click on any channel you want to join."}),Object(n.jsx)("li",{children:'\u2b50\ufe0f Create a channel with the "+" icon.'}),Object(n.jsx)("li",{children:"\u2b50\ufe0f Send messages with the text input."}),Object(n.jsx)("li",{children:"\u2b50\ufe0f Browse channels with the search input."}),Object(n.jsx)("li",{children:'\u2b50\ufe0f Report a bug with the "bug" icon.'}),Object(n.jsx)("li",{children:"\u2b50\ufe0f Click on your profile to edit."}),Object(n.jsx)("li",{children:'\u2b50\ufe0f Use the "exit" icon to logout.'})]})]})})},y=a(399),v=a(40),k=a.n(v),C=function(e){var t=Object(o.c)((function(e){return e.auth})),a=t.username,r=t.image;return Object(n.jsxs)("div",{className:k.a.messageContainer,children:[Object(n.jsx)("img",{className:k.a.image,alt:"User",src:r}),Object(n.jsxs)("div",{className:k.a.textBox,children:[Object(n.jsxs)("p",{className:k.a.username,children:[a," ",Object(n.jsx)("span",{className:k.a.date,children:e.date})]}),Object(n.jsx)("p",{className:k.a.message,children:e.text})]})]})},N=function(e){return Object(r.useEffect)((function(){var e=document.getElementById("chat");e&&(e.scrollTop=e.scrollHeight)})),Object(n.jsx)("div",{id:"chat",className:k.a.container,onClick:e.onClick,children:e.loading?Object(n.jsx)("div",{className:k.a.loading,children:Object(n.jsx)(y.a,{})}):Object(n.jsx)("div",{className:k.a.wrapper,children:e.messages.map((function(e){return Object(n.jsx)(C,{_id:e._id,username:e.username,text:e.text,image:e.image,date:e.date},e._id)}))})})},w=a(413),S=a(409),R=a(190),E=a.n(R),G=a(92),T=a.n(G),D=function(e){var t=Object(r.useState)(""),a=Object(d.a)(t,2),s=a[0],c=a[1],i=function(){e.sendClick(s,function(){var e=new Date,t=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],a=String(e.getDate()).padStart(2,"0");return"".concat(t+" "+a+","," - ").concat((new Date).getHours(),":").concat((new Date).getMinutes())}()),c("")};return Object(n.jsxs)("div",{className:T.a.container,onClick:e.onClick,children:[Object(n.jsx)(w.a,{className:T.a.input,placeholder:"Write here...",value:s,onChange:function(e){return c(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&i()}}),Object(n.jsx)(S.a,{className:T.a.iconButton,onClick:i,children:Object(n.jsx)(E.a,{className:T.a.send})})]})},A=a(191),I=a.n(A),L=a(81),U=a.n(L),B=function(e){return Object(n.jsx)("div",{className:U.a.container,children:Object(n.jsxs)("div",{className:U.a.wrapper,children:[Object(n.jsx)(S.a,{className:U.a.iconButton,onClick:e.menuClick,children:Object(n.jsx)(I.a,{className:U.a.menu,fontSize:"large"})}),Object(n.jsx)("h2",{className:U.a.title,children:e.title})]})})},P=a(193),H=a.n(P),M=a(192),F=a.n(M),q=a(41),J=a.n(q),Y=function(e){return Object(n.jsx)("div",{className:J.a.container,children:e.inChannel?Object(n.jsxs)("div",{className:J.a.wrapperInChannel,children:[Object(n.jsx)(S.a,{className:J.a.arrowButton,onClick:e.arrowClick,children:Object(n.jsx)(F.a,{className:J.a.arrow})}),Object(n.jsx)("h2",{className:J.a.title,children:"All channels"})]}):Object(n.jsxs)("div",{className:J.a.wrapperOutChannel,children:[Object(n.jsx)("h2",{className:J.a.title,children:"Channels"}),Object(n.jsx)(S.a,{className:J.a.addButton,onClick:e.plusClick,children:Object(n.jsx)(H.a,{className:J.a.add})})]})})},V=a(194),X=a.n(V),W=a(53),z=a.n(W),Q=function(e){var t=Object(o.c)((function(e){return e.auth})),a=t.username,r=t.image;return Object(n.jsx)("div",{className:z.a.container,children:Object(n.jsxs)("div",{className:z.a.wrapper,children:[Object(n.jsxs)("div",{className:z.a.userBox,children:[Object(n.jsx)("img",{className:z.a.image,alt:"User",src:r,onClick:e.profileClick}),Object(n.jsx)("p",{className:z.a.username,children:a})]}),Object(n.jsx)("div",{className:z.a.buttonContainer,children:Object(n.jsx)(S.a,{className:z.a.exitButton,onClick:e.exitClick,children:Object(n.jsx)(X.a,{className:z.a.exit})})})]})})},Z=a(195),K=a.n(Z),$=a(93),ee=a.n($),te=function(e){var t=Object(r.useState)(""),a=Object(d.a)(t,2),s=a[0],c=a[1];return Object(n.jsxs)("div",{className:ee.a.container,children:[Object(n.jsx)(S.a,{className:ee.a.iconButton,children:Object(n.jsx)(K.a,{className:ee.a.search})}),Object(n.jsx)(w.a,{className:ee.a.input,placeholder:"Search...",onChange:function(t){return function(t){c(t.target.value);var a=e.groups.filter((function(e){return e.title.toLowerCase().includes(t.target.value.toLowerCase())}));e.update(a)}(t)},value:s})]})},ae=a(82),ne=a.n(ae),re=function(e){return Object(n.jsxs)("div",{className:ne.a.group,onClick:function(){return e.groupClick(e._id)},children:[Object(n.jsx)("span",{className:ne.a.tag,children:e.tag}),Object(n.jsx)("p",{className:ne.a.title,children:e.title})]})},se=function(e){return Object(n.jsx)("div",{className:ne.a.container,children:Object(n.jsx)("div",{className:ne.a.wrapper,children:e.groups.map((function(t){return Object(n.jsx)(re,{_id:t._id,title:t.title,tag:"".concat(t.title[0]).concat(t.title[1]).toUpperCase(),groupClick:function(t){return e.groupClick(t)}},t._id)}))})})},ce=a(94),ie=a.n(ce),oe=function(e){var t,a;return Object(n.jsx)("div",{className:ie.a.container,children:Object(n.jsxs)("div",{className:ie.a.wrapper,children:[Object(n.jsx)("p",{className:ie.a.title,children:null===(t=e.currentGroup)||void 0===t?void 0:t.title}),Object(n.jsx)("p",{className:ie.a.description,children:null===(a=e.currentGroup)||void 0===a?void 0:a.description})]})})},le=a(56),ue=a.n(le),pe=function(e){var t=Object(o.c)((function(e){return e.auth})),a=t.username,r=t.image;return Object(n.jsxs)("div",{className:ue.a.member,children:[Object(n.jsx)("img",{className:ue.a.image,alt:"User",src:r}),Object(n.jsx)("p",{className:ue.a.username,children:a})]})},de=function(e){return Object(n.jsxs)("div",{className:ue.a.container,children:[Object(n.jsx)("p",{className:ue.a.title,children:"Members"}),e.loading?Object(n.jsx)("div",{className:ue.a.loading,children:Object(n.jsx)(y.a,{})}):Object(n.jsx)("div",{className:ue.a.wrapper,children:e.members.map((function(e){return Object(n.jsx)(pe,{_id:null===e||void 0===e?void 0:e._id,username:null===e||void 0===e?void 0:e.username,image:null===e||void 0===e?void 0:e.image},null===e||void 0===e?void 0:e._id)}))})]})},je=a(407),be=a(201),me=a(403),Oe=a(114),he=a.n(Oe),_e=function(e){return e.isPurple?Object(n.jsx)("button",{onClick:e.onClick,className:e.small?he.a.smallPurple:he.a.purple,type:e.type?e.type:"button",children:e.title}):Object(n.jsx)("button",{onClick:e.onClick,className:he.a.black,type:e.type?e.type:"button",children:e.title})},ge=a(68),xe=a.n(ge),fe=Object(be.a)({palette:{type:"dark"}}),ye=function(e){var t=Object(o.b)(),a=Object(r.useState)(!0),s=Object(d.a)(a,2),c=s[0],i=s[1],l=Object(r.useState)(""),u=Object(d.a)(l,2),p=u[0],j=u[1],b=Object(r.useState)(!1),m=Object(d.a)(b,2),O=m[0],h=m[1],_=Object(r.useState)(""),g=Object(d.a)(_,2),x=g[0],f=g[1],y=Object(r.useState)(""),v=Object(d.a)(y,2),k=v[0],C=v[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:xe.a.backdrop,onClick:function(){return t({type:"MODAL",payload:{modal:null}})}}),Object(n.jsxs)("div",{className:xe.a.modal,children:[Object(n.jsx)("h2",{children:e.title}),Object(n.jsx)(me.a,{theme:fe,children:Object(n.jsxs)("form",{className:xe.a.form,onSubmit:function(e){return e.preventDefault()},children:[Object(n.jsx)(je.a,{className:xe.a.input,id:"title",label:"Title",variant:"outlined",onChange:function(e){return function(e){e.target.value.length<=1?(h(!0),f("Title should contain at least 2 characters.")):(h(!1),f(""),i(!0)),j(e.target.value)}(e)},helperText:x,error:O,value:p}),Object(n.jsx)(je.a,{className:xe.a.input,id:"description",rows:3,label:"Description",variant:"outlined",multiline:!0,value:k,onChange:function(e){return C(e.target.value)}}),Object(n.jsx)(_e,{onClick:function(){return function(t,a){O?i(!1):e.onCreate(t,a)}(p,k)},isPurple:!0,title:"Create",small:!0}),!c&&Object(n.jsx)("p",{className:xe.a.error,children:"Invalid entries."})]})})]})]})},ve=a(57),ke=a.n(ve),Ce=Object(be.a)({palette:{type:"dark"}}),Ne=function(e){var t=Object(o.b)(),a=Object(o.c)((function(e){return e.auth})),s=a.username,c=a.image,i=Object(r.useRef)(null),l=Object(r.useState)(!1),j=Object(d.a)(l,2),m=j[0],O=j[1],h=Object(r.useState)(!0),_=Object(d.a)(h,2),g=_[0],x=_[1],f=Object(r.useState)(s),v=Object(d.a)(f,2),k=v[0],C=v[1],N=Object(r.useState)(!1),w=Object(d.a)(N,2),S=w[0],R=w[1],E=Object(r.useState)(""),G=Object(d.a)(E,2),T=G[0],D=G[1],A=Object(r.useState)(c),I=Object(d.a)(A,2),L=I[0],U=I[1],B=function(){var e=Object(p.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,b.a.post("".concat("http://localhost:5000/api","/imageUpload"),t);case 4:a=e.sent,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("ERROR",e.t0),O(!1);case 11:if(a){e.next=13;break}return e.abrupt("return");case 13:U(a.data.url),O(!1);case 15:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:ke.a.backdrop,onClick:function(){return t({type:"MODAL",payload:{modal:null}})}}),Object(n.jsxs)("div",{className:ke.a.modal,children:[Object(n.jsx)("h2",{children:"Profile"}),Object(n.jsx)(me.a,{theme:Ce,children:Object(n.jsxs)("form",{className:ke.a.form,onSubmit:function(e){return e.preventDefault()},children:[Object(n.jsx)("img",{className:ke.a.image,alt:"User",src:L,onClick:function(){null!==i.current&&i.current.click()}}),Object(n.jsx)("input",{className:ke.a.file,type:"file",ref:i,accept:".jpg,.png,.jpeg",onChange:function(e){var t=new FormData;t.append("file",e.target.files[0]),t.append("timestamp",Math.floor(Date.now()/1e3).toString()),B(t)}}),Object(n.jsx)(je.a,{className:ke.a.input,id:"username",label:"Username",variant:"outlined",onChange:function(e){return function(e){e.target.value.length<=2?(R(!0),D("Title should contain at least 3 characters.")):(R(!1),D(""),x(!0)),C(e.target.value)}(e)},helperText:T,error:S,value:k}),Object(n.jsx)(_e,{onClick:function(){return function(t,a){S?x(!1):e.onEdit(t,a)}(k,L)},isPurple:!0,title:"Edit",small:!0}),!g&&Object(n.jsx)("p",{className:ke.a.error,children:"Invalid entries."}),m&&Object(n.jsx)(y.a,{})]})})]})]})},we=a(58),Se=a.n(we),Re=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth})),a=Object(o.c)((function(e){return e.app})),s=a.inChannel,c=a.currentGroup,i=a.displayedGroups,l=a.messages,j=a.members,m=a.groups,g=a.modal,x=Object(r.useState)(!1),y=Object(d.a)(x,2),v=y[0],k=y[1],C=Object(r.useState)(!1),w=Object(d.a)(C,2),S=w[0],R=w[1],E=Object(r.useState)({open:!1,severity:void 0,message:null}),G=Object(d.a)(E,2),T=G[0],A=G[1],I=Object(r.useState)(null),L=Object(d.a)(I,2),U=L[0],P=L[1];Object(r.useEffect)((function(){var e=O()("http://localhost:5000",{transports:["websocket"]});e.emit("new user",t.id),e.on("fetch messages",(function(e){return X(e)})),e.on("fetch group",V),P(e),V()}),[]),Object(r.useEffect)((function(){U&&(U.emit("join group",t.id,null===c||void 0===c?void 0:c._id),X())}),[c]);var H,M,F=function(){var a=Object(p.a)(u.a.mark((function a(n,r){var s,c,i,o;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=t.token,c=t.id,s){a.next=4;break}return A({open:!0,severity:"error",message:"Guests are not allowed to create groups, please register."}),a.abrupt("return");case 4:return a.prev=4,a.next=7,b.a.post("".concat("http://localhost:5000/api","/users/verify"),{id:c,token:s});case 7:i=a.sent,a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(4),console.log("[ERROR][AUTH][VERIFY]: ",a.t0),a.abrupt("return");case 14:if(i.data.access){a.next=17;break}return localStorage.removeItem("userData"),a.abrupt("return");case 17:return a.prev=17,a.next=20,b.a.post("".concat("http://localhost:5000/api","/groups"),{title:n,description:r||"No description."});case 20:o=a.sent,a.next=28;break;case 23:return a.prev=23,a.t1=a.catch(17),console.log("[ERROR][GROUPS][CREATE]: ",a.t1),A({open:!0,severity:"error",message:"An error occured: Could not create group."}),a.abrupt("return");case 28:if(o){a.next=30;break}return a.abrupt("return");case 30:e({type:"MODAL",payload:{modal:null}}),V(),null===U||void 0===U||U.emit("create group",t.id,n),A({open:!0,severity:"success",message:"".concat(n," channel created.")});case 34:case"end":return a.stop()}}),a,null,[[4,10],[17,23]])})));return function(e,t){return a.apply(this,arguments)}}(),q=function(){var a=Object(p.a)(u.a.mark((function a(n,r){var s,c,i,o;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=t.token,c=t.id,s){a.next=4;break}return A({open:!0,severity:"error",message:"Guests are not allowed to edit profile, please register."}),a.abrupt("return");case 4:return a.prev=4,a.next=7,b.a.post("".concat("http://localhost:5000/api","/users/verify"),{id:c,token:s});case 7:i=a.sent,a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(4),console.log("[ERROR][AUTH][VERIFY]: ",a.t0),a.abrupt("return");case 14:if(i.data.access){a.next=17;break}return localStorage.removeItem("userData"),a.abrupt("return");case 17:return a.prev=17,a.next=20,b.a.put("".concat("http://localhost:5000/api","/users/edit"),{id:c,username:n,image:r});case 20:o=a.sent,a.next=28;break;case 23:return a.prev=23,a.t1=a.catch(17),console.log("[ERROR][USERS][EDIT]: ",a.t1),A({open:!0,severity:"error",message:"An error occured: Could not edit profile."}),a.abrupt("return");case 28:if(o){a.next=30;break}return a.abrupt("return");case 30:A({open:!0,severity:"success",message:"Profile updated."}),e({type:"MODAL",payload:{modal:null}}),e({type:"EDIT",payload:{username:o.data.user.username,image:o.data.user.image}});case 33:case"end":return a.stop()}}),a,null,[[4,10],[17,23]])})));return function(e,t){return a.apply(this,arguments)}}(),J=function(){var e=Object(p.a)(u.a.mark((function e(a,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,b.a.post("".concat("http://localhost:5000/api","/messages"),{gid:null===c||void 0===c?void 0:c._id,text:a,username:t.username,image:t.image,uid:t.id,date:n});case 5:r=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log("[ERROR][GROUPS][CREATE]: ",e.t0),A({open:!0,severity:"error",message:"An error occured: Could not send message."}),e.abrupt("return");case 13:if(r){e.next=15;break}return e.abrupt("return");case 15:null===U||void 0===U||U.emit("message",t.id,null===c||void 0===c?void 0:c._id);case 16:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,a){return e.apply(this,arguments)}}(),V=function(){var t=Object(p.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("".concat("http://localhost:5000/api","/groups"));case 3:a=t.sent,t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(0),console.log("[ERROR][GROUPS][FETCH]: ",t.t0),A({open:!0,severity:"error",message:"An error occured: Could not fetch groups."}),t.abrupt("return");case 11:if(a){t.next=13;break}return t.abrupt("return");case 13:e({type:"FETCH GROUPS",payload:{displayedGroups:a.data.groups,groups:a.data.groups}});case 14:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),X=function(){var t=Object(p.a)(u.a.mark((function t(){var a,n,r=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.length>0&&void 0!==r[0]?r[0]:null===c||void 0===c?void 0:c._id){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,b.a.get("".concat("http://localhost:5000/api","/groups/").concat(a));case 6:n=t.sent,t.next=15;break;case 9:return t.prev=9,t.t0=t.catch(3),console.log("[ERROR][MESSAGES][FETCH]: ",t.t0),A({open:!0,severity:"error",message:"An error occured: Could not fetch messages and members."}),R(!1),t.abrupt("return");case 15:if(R(!1),!n.data.error){t.next=19;break}return A({open:!0,severity:"error",message:"An error occured: Could not fetch messages and members."}),t.abrupt("return");case 19:e({type:"FETCH MESSAGES",payload:{messages:n.data.messages,members:n.data.members}});case 20:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(){return t.apply(this,arguments)}}();return s?(H=Object(n.jsxs)("div",{className:Se.a.sideContent,children:[Object(n.jsx)(oe,{currentGroup:c}),Object(n.jsx)(de,{members:j,loading:S})]}),M=Object(n.jsxs)("div",{className:Se.a.main,children:[Object(n.jsx)(B,{title:null===c||void 0===c?void 0:c.title,menuClick:function(){return k(!0)}}),Object(n.jsx)(N,{messages:l,onClick:function(){return k(!1)},loading:S}),Object(n.jsx)(D,{sendClick:J,onClick:function(){return k(!1)}})]})):(H=Object(n.jsxs)("div",{className:Se.a.sideContent,children:[Object(n.jsx)(te,{groups:m,update:function(t){return e({type:"SEARCH",payload:{displayedGroups:t}})}}),Object(n.jsx)(se,{groups:i,groupClick:function(t){return function(t){R(!0);var a=m.filter((function(e){return e._id===t}));a.length>0&&e({type:"CHANGE GROUP",payload:{currentGroup:a[0]}})}(t)}})]}),M=Object(n.jsxs)("div",{className:Se.a.main,children:[Object(n.jsx)(B,{title:"",menuClick:function(){return k(!0)}}),Object(n.jsx)(f,{onClick:function(){return k(!1)}})]})),Object(n.jsxs)("div",{className:Se.a.container,children:[Object(n.jsxs)("div",{className:v?Se.a.mobile:Se.a.side,children:[Object(n.jsx)(Y,{inChannel:s,arrowClick:function(){e({type:"EXIT"})},plusClick:function(){e({type:"MODAL",payload:{modal:"create"}}),k(!1)}}),H,Object(n.jsx)(Q,{exitClick:function(){null===U||void 0===U||U.disconnect(),localStorage.removeItem("userData"),e({type:"LOGOUT"})},profileClick:function(){e({type:"MODAL",payload:{modal:"edit"}}),k(!1)}})]}),M,"create"===g&&Object(n.jsx)(ye,{onCreate:F,title:"New Channel"}),"edit"===g&&Object(n.jsx)(Ne,{onEdit:q}),Object(n.jsx)(h.a,{open:T.open,onClose:function(){return A({open:!1,severity:T.severity,message:null})},autoHideDuration:5e3,children:Object(n.jsx)(_.a,{variant:"filled",onClose:function(){return A({open:!1,severity:T.severity,message:null})},severity:T.severity,children:T.message})})]})},Ee=a(8),Ge=a(30),Te=a(19),De=a(128),Ae=a.n(De),Ie=function(e){var t=Object(o.b)(),a=function(){var e=Object(p.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("".concat("http://localhost:5000/api","/users/guest"));case 3:a=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),console.log("[ERROR][AUTH][GUEST]: ",e.t0),e.abrupt("return");case 10:if(a.data.access){e.next=12;break}return e.abrupt("return");case 12:t({type:"GUEST",payload:Object(Ee.a)({},a.data.user)});case 13:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:Ae.a.container,children:[Object(n.jsx)("h1",{children:"Welcome"}),Object(n.jsx)(Ge.b,{to:"/login",children:Object(n.jsx)(_e,{onClick:function(){},isPurple:!1,title:"Login",small:!1})}),Object(n.jsx)(Ge.b,{to:"/signup",children:Object(n.jsx)(_e,{onClick:function(){},isPurple:!0,title:"Signup",small:!1})}),Object(n.jsx)("p",{className:Ae.a.guest,onClick:a,children:"Continue as guest"})]})},Le=a(406),Ue=a(410),Be=a(113),Pe=a(52),He=a(405),Me=a(414),Fe=a(112),qe=a.n(Fe),Je=a(371),Ye=a(69),Ve=a.n(Ye),Xe=Object(He.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),We=function(e){var t=Object(o.b)(),a=Object(Te.g)(),s=Xe(),c=Object(r.useState)(!1),i=Object(d.a)(c,2),l=i[0],j=i[1],m=Object(r.useState)(!1),O=Object(d.a)(m,2),g=O[0],x=O[1],f=Object(r.useState)({open:!1,message:null}),v=Object(d.a)(f,2),k=v[0],C=v[1],N=function(){var e=Object(p.a)(u.a.mark((function e(n,r,s){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,b.a.post("".concat("http://localhost:5000/api","/users/login"),{checked:n,email:r.toLowerCase(),password:s.toLowerCase()});case 4:c=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),console.log("[ERROR][AUTH][LOGIN]: ",e.t0),j(!1),e.abrupt("return");case 12:if(c.data.access){e.next=16;break}return C({open:!0,message:c.data.message}),j(!1),e.abrupt("return");case 16:n&&localStorage.setItem("userData",JSON.stringify({id:c.data.user.id,token:c.data.user.token})),t({type:"LOGIN",payload:Object(Ee.a)({},c.data.user)}),a.push(""),j(!1);case 20:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a,n){return e.apply(this,arguments)}}(),w=Object(Be.a)({initialValues:{email:"",password:""},validationSchema:Pe.a({email:Pe.b().email("Invalid email address").required("Required"),password:Pe.b().min(6,"Must be 6 characters at least").required("Required")}),onSubmit:function(e){return N(g,e.email,e.password)}});return Object(n.jsxs)("div",{className:Ve.a.container,children:[Object(n.jsx)(Ge.b,{to:"/",children:Object(n.jsx)(Me.a,{className:s.avatar,children:Object(n.jsx)(qe.a,{})})}),Object(n.jsx)(Je.a,{component:"h1",variant:"h5",children:"Login"}),Object(n.jsxs)("form",{className:Ve.a.form,children:[Object(n.jsx)(je.a,Object(Ee.a)({className:Ve.a.input,id:"email",label:"Email",variant:"outlined",type:"text",helperText:w.touched.email&&w.errors.email,error:w.touched.email&&!!w.errors.email},w.getFieldProps("email"))),Object(n.jsx)(je.a,Object(Ee.a)(Object(Ee.a)({className:Ve.a.input,id:"password",label:"Password",variant:"outlined",type:"password"},w.getFieldProps("password")),{},{helperText:w.touched.password&&w.errors.password,error:w.touched.password&&!!w.errors.password})),Object(n.jsx)(Le.a,{className:Ve.a.check,control:Object(n.jsx)(Ue.a,{checked:g,onChange:function(){return x((function(e){return!e}))},name:"checked",color:"primary"}),label:"Remember me"}),Object(n.jsx)(_e,{type:"submit",onClick:w.handleSubmit,isPurple:!0,title:"Login",small:!1})]}),Object(n.jsx)(Ge.b,{to:"/signup",children:Object(n.jsx)("p",{className:Ve.a.guest,children:"Don't have an account? Sign Up"})}),l&&Object(n.jsx)(y.a,{}),Object(n.jsx)(h.a,{open:k.open,onClose:function(){return C({open:!1,message:null})},autoHideDuration:5e3,children:Object(n.jsx)(_.a,{variant:"filled",onClose:function(){return C({open:!1,message:null})},severity:"error",children:k.message})})]})},ze=a(59),Qe=a.n(ze),Ze=Object(He.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Ke=function(e){var t=Object(o.b)(),a=Object(Te.g)(),s=Ze(),c=Object(r.useState)(!1),i=Object(d.a)(c,2),l=i[0],j=i[1],m=Object(r.useState)(!1),O=Object(d.a)(m,2),g=O[0],x=O[1],f=Object(r.useState)({open:!1,message:null}),v=Object(d.a)(f,2),k=v[0],C=v[1],N=function(){var e=Object(p.a)(u.a.mark((function e(n,r,s,c){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,b.a.post("".concat("http://localhost:5000/api","/users/signup"),{checked:n,email:r.toLowerCase(),password:s.toLowerCase(),username:c});case 4:i=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),console.log("[ERROR][AUTH][SIGNUP]: ",e.t0),j(!1),e.abrupt("return");case 12:if(i.data.access){e.next=16;break}return C({open:!0,message:i.data.message}),j(!1),e.abrupt("return");case 16:n&&localStorage.setItem("userData",JSON.stringify({id:i.data.user.id,token:i.data.user.token})),t({type:"LOGIN",payload:Object(Ee.a)({},i.data.user)}),a.push(""),j(!1);case 20:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),w=Object(Be.a)({initialValues:{username:"",email:"",password:""},validationSchema:Pe.a({username:Pe.b().min(2,"Must be 2 characters at least").required("Required"),email:Pe.b().email("Invalid email address").required("Required"),password:Pe.b().min(6,"Must be 6 characters at least").required("Required")}),onSubmit:function(e){return N(g,e.email,e.password,e.username)}});return Object(n.jsxs)("div",{className:Qe.a.container,children:[Object(n.jsx)(Ge.b,{to:"/",children:Object(n.jsx)(Me.a,{className:s.avatar,children:Object(n.jsx)(qe.a,{})})}),Object(n.jsx)(Je.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(n.jsxs)("form",{className:Qe.a.form,children:[Object(n.jsx)(je.a,Object(Ee.a)({className:Qe.a.input,id:"username",label:"Username",variant:"outlined",helperText:w.touched.username&&w.errors.username,error:w.touched.username&&!!w.errors.username},w.getFieldProps("username"))),Object(n.jsx)(je.a,Object(Ee.a)({className:Qe.a.input,id:"email",label:"Email",variant:"outlined",helperText:w.touched.email&&w.errors.email,error:w.touched.email&&!!w.errors.email},w.getFieldProps("email"))),Object(n.jsx)(je.a,Object(Ee.a)({className:Qe.a.input,id:"password",label:"Password",type:"password",variant:"outlined",helperText:w.touched.password&&w.errors.password,error:w.touched.password&&!!w.errors.password},w.getFieldProps("password"))),Object(n.jsx)(Le.a,{className:Qe.a.check,control:Object(n.jsx)(Ue.a,{checked:g,onChange:function(){return x((function(e){return!e}))},name:"checkedB",color:"primary"}),label:"Remember me"}),Object(n.jsx)(_e,{type:"submit",onClick:w.handleSubmit,isPurple:!0,title:"Signup",small:!1})]}),Object(n.jsx)(Ge.b,{to:"/login",children:Object(n.jsx)("p",{className:Qe.a.guest,children:"Already a member ? Login"})}),l&&Object(n.jsx)(y.a,{}),Object(n.jsx)(h.a,{open:k.open,onClose:function(){return C({open:!1,message:null})},autoHideDuration:5e3,children:Object(n.jsx)(_.a,{variant:"filled",onClose:function(){return C({open:!1,message:null})},severity:"error",children:k.message})})]})},$e=Object(be.a)({palette:{type:"dark"}}),et=function(e){var t=Object(o.b)();Object(r.useEffect)((function(){var e=localStorage.getItem("userData");if(e){var t=JSON.parse(e);a(t.id,t.token)}}),[]);var a=function(){var e=Object(p.a)(u.a.mark((function e(a,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("".concat("http://localhost:5000/api","/users/verify"),{id:a,token:n});case 3:r=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),console.log("[ERROR][AUTH][VERIFY]: ",e.t0),e.abrupt("return");case 10:if(r.data.access){e.next=13;break}return localStorage.removeItem("userData"),e.abrupt("return");case 13:t({type:"LOGIN",payload:Object(Ee.a)({},r.data.user)});case 14:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.jsx)(me.a,{theme:$e,children:Object(n.jsx)(Ge.a,{children:Object(n.jsxs)(Te.d,{children:[Object(n.jsx)(Te.b,{path:"/login",exact:!0,component:We}),Object(n.jsx)(Te.b,{path:"/signup",exact:!0,component:Ke}),Object(n.jsx)(Te.b,{path:"/",exact:!0,component:Ie}),Object(n.jsx)(Te.a,{to:"/"})]})})})},tt=function(){return Object(o.c)((function(e){return e.auth.isLogged}))?Object(n.jsx)(Re,{}):Object(n.jsx)(et,{})},at={inChannel:!1,messages:[],members:[],displayedGroups:[],groups:[],currentGroup:null,modal:null},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE GROUP":return Object(Ee.a)(Object(Ee.a)({},e),{},{currentGroup:t.payload.currentGroup,inChannel:!0});case"SEARCH":return Object(Ee.a)(Object(Ee.a)({},e),{},{displayedGroups:t.payload.displayedGroups});case"FETCH GROUPS":return Object(Ee.a)(Object(Ee.a)({},e),{},{displayedGroups:t.payload.displayedGroups,groups:t.payload.groups});case"FETCH MESSAGES":return Object(Ee.a)(Object(Ee.a)({},e),{},{messages:t.payload.messages,members:t.payload.members});case"MODAL":return Object(Ee.a)(Object(Ee.a)({},e),{},{modal:t.payload.modal});case"EXIT":return Object(Ee.a)(Object(Ee.a)({},e),{},{inChannel:!1,currentGroup:null,displayedGroups:e.groups,members:[],messages:[]});default:return e}},rt={isLogged:!1,username:null,image:null,token:null,id:null},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(Ee.a)(Object(Ee.a)({},e),{},{isLogged:!0,username:t.payload.username,image:t.payload.image,token:t.payload.token,id:t.payload.id});case"LOGOUT":return Object(Ee.a)(Object(Ee.a)({},e),{},{isLogged:!1,username:null,image:null,token:null,id:null});case"GUEST":return Object(Ee.a)(Object(Ee.a)({},e),{},{isLogged:!0,username:t.payload.username,image:t.payload.image,token:null,id:t.payload.id});case"EDIT":return Object(Ee.a)(Object(Ee.a)({},e),{},{isLogged:!0,username:t.payload.username,image:t.payload.image});default:return e}},ct=(a(369),Object(i.b)({auth:st,app:nt})),it=Object(i.c)(ct);c.a.render(Object(n.jsx)(o.a,{store:it,children:Object(n.jsx)(tt,{})}),document.getElementById("root"))},40:function(e,t,a){e.exports={container:"styles_container__3Niza",wrapper:"styles_wrapper__1LXHj",messageContainer:"styles_messageContainer__2BOhR",image:"styles_image__3lhi_",textBox:"styles_textBox__3ZgkF",username:"styles_username__3MNjK",message:"styles_message__2EenM",date:"styles_date__2uT6J",loading:"styles_loading__2yPfW"}},41:function(e,t,a){e.exports={container:"styles_container__3BXkG",wrapperInChannel:"styles_wrapperInChannel__htkyy",wrapperOutChannel:"styles_wrapperOutChannel__2VRY2",title:"styles_title__2clG8",addButton:"styles_addButton__12tTJ",arrow:"styles_arrow__2vgBi",add:"styles_add__2wScA"}},53:function(e,t,a){e.exports={container:"styles_container__1i7Qt",wrapper:"styles_wrapper__2qbpV",userBox:"styles_userBox__3a5u9",image:"styles_image__11Yot",exitButton:"styles_exitButton__3BCit",username:"styles_username__3LXNR",exit:"styles_exit__2YFO5",buttonContainer:"styles_buttonContainer__3GfD6"}},56:function(e,t,a){e.exports={container:"styles_container__1eC4c",wrapper:"styles_wrapper__yKduZ",member:"styles_member__3fRCJ",title:"styles_title__2XsWg",username:"styles_username__2eb-_",image:"styles_image__J8vpo",loading:"styles_loading__2VQz7"}},57:function(e,t,a){e.exports={backdrop:"styles_backdrop__vFnbO",modal:"styles_modal__2ypNE",form:"styles_form__35WkX",input:"styles_input__2PV0Q",error:"styles_error__36mV2",image:"styles_image__11FlE",file:"styles_file__38Q9g"}},58:function(e,t,a){e.exports={container:"styles_container__4Nu-6",main:"styles_main__1s-dM",side:"styles_side__1Sb-a",mobile:"styles_mobile__36sqR",sideContent:"styles_sideContent__2RRNI","slide-in":"styles_slide-in__3o5Wp"}},59:function(e,t,a){e.exports={container:"styles_container__2xNfY",logo:"styles_logo__BRvPe",form:"styles_form__1o0MN",input:"styles_input__1kiHw",submit:"styles_submit__36CgC",guest:"styles_guest__23uPH",error:"styles_error__1Wx2V"}},68:function(e,t,a){e.exports={backdrop:"styles_backdrop__3YpAz",modal:"styles_modal__3y1tw",form:"styles_form__V8Jh9",input:"styles_input__32pb9",error:"styles_error__YbLa9"}},69:function(e,t,a){e.exports={container:"styles_container__1o0Fe",logo:"styles_logo__-42WF",form:"styles_form__3iops",input:"styles_input__3SIu9",submit:"styles_submit__2tz8r",guest:"styles_guest__1fzKS",error:"styles_error__ZnYsY"}},80:function(e,t,a){e.exports={container:"styles_container__22UZb",title:"styles_title__Ej-Me",wrapper:"styles_wrapper__jOH-a",list:"styles_list__15TjS",description:"styles_description__2v6wa",logo:"styles_logo__6xdUQ"}},81:function(e,t,a){e.exports={container:"styles_container__DqthX",wrapper:"styles_wrapper__tQxOT",title:"styles_title__3NY4r",iconButton:"styles_iconButton__3PNcZ",menu:"styles_menu__6okpy"}},82:function(e,t,a){e.exports={container:"styles_container__18Kjq",wrapper:"styles_wrapper__2Xr1l",group:"styles_group__2c-j8",tag:"styles_tag___JKYL",title:"styles_title__1CSj3"}},92:function(e,t,a){e.exports={container:"styles_container__82uG4",input:"styles_input__3eA4I",iconButton:"styles_iconButton__2vq75",send:"styles_send__3iZ-6"}},93:function(e,t,a){e.exports={container:"styles_container__1BDXC",input:"styles_input__pfyyU",iconButton:"styles_iconButton__EtfuS",search:"styles_search__2jlGM"}},94:function(e,t,a){e.exports={container:"styles_container__1LU86",wrapper:"styles_wrapper__iBB-9",title:"styles_title__3l4Z9",description:"styles_description__2OoUl"}}},[[370,1,2]]]);
//# sourceMappingURL=main.bc8f40d1.chunk.js.map